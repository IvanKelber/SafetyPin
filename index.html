<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Safety Pin by Ronallen</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Safety Pin</h1>
      <h2 class="project-tagline">You better hope it&#39;s always sunny in Philadelphia. </h2>
      <a href="https://github.com/Ronallen/SafetyPin" class="btn">View on GitHub</a>
      <a href="https://github.com/Ronallen/SafetyPin/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/Ronallen/SafetyPin/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h3>
<a id="introducing-safety-pin" class="anchor" href="#introducing-safety-pin" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Introducing Safety Pin</h3>

<p>The goal of Safety Pin is to analyze crime data to predict the safest walking path between two points. Our first approach was to target major cities where the probability of occurrence of crimes is observed to be higher.</p>

<p>We leveraged the data portals of many major cities to obtain crime data from recent years. The data structure of every city’s database was different. Not all had the basic information we intended to extract, so we had to narrow down to those cities which were in our best interest. We settled on five major cities: Boston, Denver, Chicago, New York, and of course, Philadelphia. For these five cities, we could easily export the data from the respective city’s crime database into .csv files. </p>

<p>Cleaning individual .csv file was not a big challenge, but maintaining a uniform format across cities was a challenging and time-consuming task. For example: the day, date, and time formats were not consistent in the original databases. The more major task was integrating the various types of offenses. No two cities have the same method of reporting offenses. Some use just a broad offense category like assault, some use a broad classification plus a sub-classification like assault with/without firearm, and some use just a text description with no clear category level. So we had to filter out the crimes from individual cities which were most relevant to our goals: only the crimes that might affect safety on the street, ignoring drug possession, prostitution, fraud, etc. Ultimately, we defined a set of crimes for our project and mapped the crime categories used by respective cities to those crimes, which were homicide, criminal sexual assault, robbery, assault, burglary, theft, battery, weapons violation, offense involving children, criminal sexual offense, and hate crime. This brought all cities’ data onto the same page, and merging all of our files into one database became feasible.</p>

<p>After visualizing our data and running it through a statistical analysis, we have some meaningful insights from our data that will help us in narrowing down the features we will need to make accurate predictions about safe paths. For example, now we know the most frequent crimes in each of the cities we worked on, and we also know that all crime types are more likely after sunset in each of the cities. Such insights will help us give reasonable weights to different crimes when we are implementing our shortest-path-in-a-graph algorithm. Also, after some research we realized that crimes can be mostly categorized as ‘Personal’ or ‘Property’ crimes. In general, ‘Personal’ crimes are the ones that target people, causing harm to individuals, and ‘Property’ crimes are the ones related to theft, causing harm to possessions. Thus, ‘Personal’ crimes should be weighted more heavily for our algorithm, because our primary concern is our app users’ safety.</p>

<p>Categorizing crimes in this manner will help us in the second half of the semester when we have to implement our algorithm. As mentioned in the project pre-proposal, we will be reducing our problem to a graph representation, with intersections as nodes and streets as edges. Depending on crime category, frequency, time, and location, we will dynamically give weights to the edges. From this point, we will have to run a shortest path algorithm. We may use Dijkstra’s algorithm, since we do not intend on having negative weights.</p>

<p>Around this point in our project, we realized that we actually do not need machine learning in our project to make predictions about the safest path. Our algorithm will dynamically make predictions based on the values given to it. As a result, we are including statistical analyses in this midterm report instead, after discussion with our mentor TA.</p>

<p>
We initially divided our project into two phases, one for the midterm report and then one for the final report submission. For this particular phase, we set our goals, as mentioned above, to clean and integrate the crime data that we will be using to predict the safest path for our users. Therefore, we do not have any concrete results that will directly show up in our end product. However, the results that we have as of now provide us insight about the data we collected and give us the required knowledge-base to apply our algorithm.
</p>

<h3>
<a id="cities-vs-crimes-heat-map" class="anchor" href="#cities-vs-crimes-heat-map" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Cities vs. Crimes Heat Map</h3>



    <p><b><u>Brief note on our data</u></b><br><br>
        We have restricted our data related to crime occurences on the street and that pose a potential threat to any pedestrian.  
        Each of us cleaned crime data for a particular city. The cities we have included for our project are, New York, Chicago, Boston, Denver and Philadelphia. We collected 
        the data from open data portals. Each of the above mentioned city had data in different formats. We cleaned and integrated it, keeping useful information, such as type 
        of crime, timestamp of occurence and location data. We constrained ourselves to these kind of information as this will be sufficient to meet our project objective, that 
        is, suggesting the safest possible route, given factors like time and location.
        <br><br>
        <b><u>Hypotheses</u></b><br><br>
        While collecting and cleaning the data, we had the following hypotheses about our data-
        <br>
        a) Theft would be the most common crime across all five cities
        <br>
        b) Chicago would have a large fraction of its crimes related to Weapons Violation 
        <br><br>
        <b><u>Brief note on our visualization</u></b><br><br>
        The above visualization provides a percentage distribution of each crime for each city. The vertical axis contains city names and the horizontal axis contains crime type.
        The different intensities of red show the fraction of each type of crime in each city. The grey color shows that a particular type crime has not yet been recorded in our 
        database for that particular city. We have used abbreviations for the crime types. On hovering over a particular cell, a tooltip displays the actual number of crimes in 
        that category in that particular city and also shows a Venn Diagram which shows a graphical representation of the fraction of crimes relevant to the tooltip. The tooltip 
        also shows the percentage of the particular crime type for the selected city.
        <br><br>
        <b><u>Inference from Visualization</u></b><br><br>
        We can clearly see from the visualization that our first hypothesis about the data is true. Theft makes up for a large fraction of crime in each of the five cities. However, 
        the hypothesis about Chicago was incorrect as only 4% of the total number of crimes in Chicago are Weapons Violation related crimes.<br><br>
        Also, we can see from our visualization that all cities have actively been maintaining records related to Robbery, Assault, Burglary and Theft. This is expected because these are 
        the most common types of crimes that occur.  
    </p>
<h3>
<a id="sundown-stats" class="anchor" href="#sundown-stats" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Sundown Stats</h3>

<p>Early on in the semester, we speculated that walking at night might be more dangerous than walking during the day. For our midterm report, we statistically tested that hypothesis (in place of applying machine learning) by comparing the number of crimes in our dataset that occurred before and after dark.</p>

<p>To do so, we used precise sunrise and sunset times for the cities and years for which we have crime data from the United States Naval Observatory’s Naval Oceanography Portal (<a href="http://aa.usno.navy.mil/data/docs/RS_OneYear.php">http://aa.usno.navy.mil/data/docs/RS_OneYear.php</a>), adjusted for Daylight Savings Time (<a href="http://aa.usno.navy.mil/faq/docs/daylight_time.php">http://aa.usno.navy.mil/faq/docs/daylight_time.php</a>). First, we counted the number of crimes that occurred in the darkness (between sunset and midnight or between midnight and sunrise) vs. the daylight (between sunrise and sunset). We tracked separate counts for (a) crimes collapsed across all cities and all types of crimes, (b) crimes broken down by city and collapsed across all types of crime, and (c) crimes broken down by type of crime and collapsed across all cities. Then, we performed binomial tests of the null hypothesis that a crime is equally likely to occur in the darkness or in the daylight.</p>

<p>We found that the crimes are NOT equally likely to occur in the darkness or the daylight but are much more likely to occur during hours of darkness. Please see below for a summary of our statistical results. These results held for every city as well as for every type of crime, with the exception of hate crimes. However, we only have hate crime data from one city (Boston) and only have 35 incidents of hate crimes total (13 in the daylight and 22 in the darkness). </p>

<p>It's interesting to note that we all saw a heat map of Chicago crime in VizOne that gave the impression that crime in Chicago is more likely during the day. To investigate, we compared the types of crime represented in the cleaned Chicago dataset from VizZOne with the types of crime represented in our dataset. Because our end goal is to build an app that helps pedestrians, we limited our project to crimes that happen on the street and that seem likely to affect the safety of a pedestrian. The VizOne Chicago data includes a much broader range of crimes, which we think explains the discrepancy between the VizOne heatmap and our statistical results for Chicago (and other cities).</p>

<p><strong>Across all cities and types of crime</strong></p>

<p><code>Daylight: 104098 incidents | Darkness: 394221 incidents</code></p>

<p><code>P-Value: 2.47032822921e-323</code></p>

<p><strong>By city, across all types of crime</strong></p>

<p><em>NEW YORK</em></p>

<p><code>Daylight: 22222 incidents | Darkness: 51876 incidents</code></p>

<p><code>P-Value: 9.88131291682e-324</code></p>

<p><em>CHICAGO</em></p>

<p><code>Daylight: 7784 incidents | Darkness: 16551 incidents</code></p>

<p><code>P-Value: 4.94065645841e-324</code></p>

<p><em>BOSTON</em></p>

<p><code>Daylight: 24149 incidents | Darkness: 48075 incidents</code></p>

<p><code>P-Value: 9.88131291682e-324</code></p>

<p><em>DENVER</em></p>

<p><code>Daylight: 22481 incidents | Darkness: 31938 incidents</code></p>

<p><code>P-Value: 9.88131291682e-324</code></p>

<p><em>PHILLY</em></p>

<p><code>Daylight: 27462 incidents | Darkness: 245781 incidents</code></p>

<p><code>P-Value: 1.48219693752e-323</code></p>

<p><strong>By type of crime, across all cities</strong></p>

<p><em>HOMICIDE</em></p>

<p><code>Daylight: 340 incidents | Darkness: 1404 incidents</code></p>

<p><code>P-Value: 2.8697439064e-153</code></p>

<p><em>CRIMINAL SEXUAL ASSAULT</em></p>

<p><code>Daylight: 421 incidents | Darkness: 3828 incidents</code></p>

<p><code>P-Value: 0.0</code></p>

<p><em>ROBBERY</em></p>

<p><code>Daylight: 9189 incidents | Darkness: 38222 incidents</code></p>

<p><code>P-Value: 4.94065645841e-324</code></p>

<p><em>ASSAULT</em></p>

<p><code>Daylight: 23879 incidents | Darkness: 119539 incidents</code></p>

<p><code>P-Value: 9.88131291682e-324</code></p>

<p><em>BURGLARY</em></p>

<p><code>Daylight: 7672 incidents | Darkness: 35680 incidents</code></p>

<p><code>P-Value: 4.94065645841e-324</code></p>

<p><em>THEFT</em></p>

<p><code>Daylight: 58986 incidents | Darkness: 184095 incidents</code></p>

<p><code>P-Value: 1.48219693752e-323</code></p>

<p><em>BATTERY</em></p>

<p><code>Daylight: 1627 incidents | Darkness: 2554 incidents</code></p>

<p><code>P-Value: 6.88691451774e-47</code></p>

<p><em>WEAPONS VIOLATION</em></p>

<p><code>Daylight: 1575 incidents | Darkness: 4992 incidents</code></p>

<p><code>P-Value: 4.94065645841e-324</code></p>

<p><em>OFFENSE INVOLVING CHILDREN</em></p>

<p><code>Daylight: 69 incidents | Darkness: 454 incidents</code></p>

<p><code>P-Value: 1.72842011796e-70</code></p>

<p><em>CRIMINAL SEXUAL OFFENSE</em></p>

<p><code>Daylight: 327 incidents | Darkness: 3431 incidents</code></p>

<p><code>P-Value: 0.0</code></p>

<p><em>HATE CRIME</em></p>

<p><code>Daylight: 13 incidents | Darkness: 22 incidents</code></p>

<p><code>P-Value: 0.175465248991</code></p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/Ronallen/SafetyPin">Safety Pin</a> is maintained by <a href="https://github.com/Ronallen">Ronallen</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
